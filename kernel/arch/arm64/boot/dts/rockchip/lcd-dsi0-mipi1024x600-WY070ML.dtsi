/*
 * Copyright (C) 2021 9tripod, Inc.
 * arch/arm64/boot/dts/lcd-dsi0-mipi1024x600-WY070ML.dtsi
 * lcd model: wy070ml
 * resolution: 1024x600
 * mipi channel: dsi0
 */

/*
 * mipi_dphy0 needs to be enabled
 * when dsi0 is enabled
 */
&dsi0 {
	status = "okay";
	//rockchip,lane-rate = <1000>;
	dsi0_panel: panel@0 {
		status = "okay";
		compatible = "simple-panel-dsi";
		reg = <0>;
		power-supply = <&vcc3v3_lcd0_n>;
		//reset-gpios = <&gpio0 RK_PA6 GPIO_ACTIVE_LOW>;
		backlight = <&backlight>;
		reset-delay-ms = <60>;
		enable-delay-ms = <60>;
		prepare-delay-ms = <60>;
		unprepare-delay-ms = <60>;
		disable-delay-ms = <60>;
		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
		dsi,format = <MIPI_DSI_FMT_RGB888>;
		dsi,lanes  = <4>;

		disp_timings0: display-timings {
			native-mode = <&dsi0_timing0>;
			dsi0_timing0: timing0 {
				clock-frequency = <60000000>;
				hactive = <1024>;
				vactive = <600>;
				hfront-porch = <150>;
				hsync-len = <20>;
				hback-porch = <150>;
				vfront-porch = <8>;
				vsync-len = <3>;
				vback-porch = <24>;
				hsync-active = <1>;
				vsync-active = <1>;
				de-active = <0>;
				pixelclk-active = <1>;
			};
		};

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;
				panel_in_dsi: endpoint {
					remote-endpoint = <&dsi_out_panel>;
				};
			};
		};
	};

	ports {
		#address-cells = <1>;
		#size-cells = <0>;

		port@1 {
			reg = <1>;
			dsi_out_panel: endpoint {
				remote-endpoint = <&panel_in_dsi>;
			};
		};
	};

};


&route_dsi0 {
	status = "okay";
	connect = <&vp1_out_dsi0>;
};

&dsi0_in_vp0 {
	status = "disabled";
};

&dsi0_in_vp1 {
	status = "okay";
};

&mipi_dphy0 {
	status = "okay";
};

&i2c1 {
	status = "okay";

	ts@40 {
		compatible = "9tripod,gslx680";
		reg = <0x40>;
		touch-gpio = <&gpio0 RK_PB5 IRQ_TYPE_EDGE_RISING>;
		reset-gpio = <&gpio0 RK_PB6 GPIO_ACTIVE_LOW>;
		max-x = <1024>;
		max-y = <600>;
	};
};

